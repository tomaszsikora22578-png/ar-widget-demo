name: Firebase Hosting CI/CD - OSTATECZNA WERSJA

on:
  push:
    branches:
      - main  # Akcja uruchomi się po pushu do gałęzi 'main'

jobs:
  deploy_frontend:
    name: Wdrożenie na Firebase Hosting (Użycie dedykowanej akcji)
    runs-on: ubuntu-latest
    
    steps:
      - name: Sprawdzenie kodu (Checkout)
        uses: actions/checkout@v4
      
      # Zamiast w9jds, użyjemy FirebaseExtended, która ma mniej problemów z Kluczami SA.
      - name: Wdrożenie na Firebase Hosting
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          # Klucz SA jest przekazywany tutaj. W tym akcji to jest standardowy input.
          firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT }}
          projectId: ar-widget-project
          # Wdrożenie domyślne. Wymaga tylko, aby public: "." było w firebase.json
          # Dodajemy repoToken na wypadek konieczności użycia go przez akcję
          repoToken: ${{ secrets.GITHUB_TOKEN }}
          
